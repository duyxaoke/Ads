var customSelect2=function(n){return{restrict:"E",scope:{myroot:"="},templateUrl:"/script-handler/app/directives/CustomSelect2/customSelect2.html",link:function(t,i,r){t.myroot.UpdateValueSelected=function(){clearInterval(t.myroot.myTimer);let r=n.defer();return t.myroot.myTimer=setInterval(()=>{t.myroot.IsFinishRender&&(t.myroot.IsDebug,clearInterval(t.myroot.myTimer),t.SetValid(t.myroot.Value),t.myControl.val(t.myroot.Value),t.myControl_s2id=$(i[0]).find(".select2-container"),t.myControl_s2id.select2("val",t.myroot.Value),r.resolve(t.myroot.Value))},100),r.promise};t.SetValid=function(n,i){n===""?$("input[name="+t.myroot.ID+"]").val(""):$("input[name="+t.myroot.ID+"]").val(n);try{i&&$("input[name="+t.myroot.ID+"]").valid()}catch(r){}};t.myControl=$(i[0]).find(".myControl");t.myroot.IsDebug;t.myroot.Core.Label?t.myroot.Core.label2=t.myroot.Core.Label:t.myroot.Core.label=r.label;t.myroot.Core.label2||(t.myroot.Core.label2="Chọn "+r.label.charAt(0).toLowerCase()+r.label.slice(1));t.myroot.ID=r.myroot.replace(".","_");t.myroot.IsFinishRender=!t.myroot.Lst||t.myroot.Lst&&t.myroot.Lst.length==0;t.myroot.API||(t.myroot.API={});t.myroot.CallBack||(t.myroot.CallBack={});t.myroot.Core.ValueDefault||(t.myroot.Core.ValueDefault="");t.myroot.ValueOrginal="";t.myroot.Value?(t.myroot.ValueOrginal=t.myroot.Value,t.myroot.Value=t.myroot.Value.toString()):t.myroot.Value=t.myroot.Core.ValueDefault;t.myroot.Onchange=function(){t.myroot.IsDebug;t.SetValid(t.myroot.Value,!0);t.myroot.CallBack.OnValuechanged&&t.myroot.CallBack.OnValuechanged(t.myroot.Value);t.myroot.CallBack.Onchanged&&t.myroot.CallBack.Onchanged()};t.myroot.API.DiscardChange=function(){t.myroot.API.SetValue(t.myroot.ValueOrginal,!0)};t.myroot.API.SetValue=function(n,i){try{t.myroot.IsDebug;(n===null||n===undefined)&&(n=t.myroot.Core.ValueDefault);t.myroot.ValueOrginal=n;t.myroot.Value=n.toString();t.myroot.UpdateValueSelected().then(n=>{t.myroot.IsDebug,i||t.myroot.CallBack.OnValuechanged&&t.myroot.CallBack.OnValuechanged(n)})}catch(r){throw r;}};t.myroot.API.DataSource=function(n){t.myroot.IsDebug;t.myroot.Lst=n;t.myroot.UpdateValueSelected()};t.myroot.API.OnStart=function(){t.myroot.IsDebug;t.myroot.IsFinishRender=!1};t.myroot.API.OnEnd=function(){t.myroot.IsDebug;t.myroot.IsFinishRender=!0};t.myroot.UpdateValueSelected();t.myControl.select2();t.myroot.IsReady=!0}}},dateTimePicker,formatMoney,getWidth,getHeight,lazyLoad,noInput,whenEnter,compile,gridSort,paginationStyle1,paginationStyle2,inputFormat;customSelect2.$inject=["$q"];dateTimePicker=function(){return{restrict:"E",scope:{myroot:"="},templateUrl:"/script-handler/app/directives/DateTimePicker/dateTimePicker.html",link:function(n,t,i){n.input=$(t[0]).find(".myDtm");n.myroot.API||(n.myroot.API={});n.myroot.CallBack||(n.myroot.CallBack={});n.myroot.ID=i.myroot.replace(".","_");n.myroot.Core.showTodayButton=!0;n.myroot.Core.showClear=!0;n.myroot.Core.showClose=!0;n.myroot.Core.label=i.label;n.myroot.Core.DateType=="MonthYear"?(n.myroot.Core.FormatValueDisplay||(n.myroot.Core.format="MM/YYYY"),n.myroot.Core.FormatValue||(n.myroot.Core.FormatValue="MM/YYYY")):n.myroot.Core.DateType=="DateTime"?(n.myroot.Core.FormatValueDisplay||(n.myroot.Core.format="DD/MM/YYYY HH:mm"),n.myroot.Core.FormatValue||(n.myroot.Core.FormatValue="MM/DD/YYYY HH:mm")):(n.myroot.Core.FormatValueDisplay||(n.myroot.Core.format="DD/MM/YYYY"),n.myroot.Core.FormatValue||(n.myroot.Core.FormatValue="MM/DD/YYYY"));n.myroot.ValueOrginal=undefined;n.myroot.Value?(n.myroot.ValueOrginal=n.myroot.Value,n.myroot.ValueDisplay=moment(n.myroot.Value).format(n.myroot.Core.format),n.myroot.Value=moment(n.myroot.Value).format(n.myroot.Core.FormatValue)):n.myroot.Value=null;n.myroot.API.SetValue=function(t,i){try{n.myroot.IsDebug;n.myroot.ValueOrginal=t;t===null||t===undefined?(n.myroot.ValueDisplay=null,n.myroot.Value=null):(n.myroot.ValueDisplay=moment(t).format(n.myroot.Core.format),n.myroot.Value=moment(t).format(n.myroot.Core.FormatValue));$("input[name="+n.myroot.ID+"]").val(n.myroot.Value);!i&&n.myroot.CallBack.OnValuechanged&&n.myroot.CallBack.OnValuechanged(n.myroot.Value)}catch(r){throw r;}};n.myroot.config={};n.myroot.config.format=n.myroot.Core.format;n.myroot.config.showTodayButton=!0;n.myroot.config.showClear=!0;n.myroot.config.showClose=!0;n.myroot.config.minDate=n.myroot.Core.MinDate?n.myroot.Core.MinDate:new Date(0);n.myroot.Core.UseCurrent!=undefined&&(n.myroot.config.useCurrent=n.myroot.Core.UseCurrent);n.input.datetimepicker(n.myroot.config);n.input.on("dp.change",function(t){n.myroot.IsDebug;t.date?(n.myroot.ValueDisplay=n.input.val(),n.myroot.Value=moment(t.date).format(n.myroot.Core.FormatValue)):(n.myroot.ValueDisplay=null,n.myroot.Value=null);$("input[name="+n.myroot.ID+"]").val(n.myroot.Value);try{$("input[name="+n.myroot.ID+"]").valid()}catch(t){}n.myroot.CallBack.OnValuechanged&&n.myroot.CallBack.OnValuechanged(n.myroot.Value)});n.myroot.API.SetMinDate=function(t){n.myroot.IsDebug;moment(t).isValid()&&(t=moment(t)._d,n.input.data("DateTimePicker").minDate(t))};n.myroot.API.SetMinTime=function(t){if(n.myroot.IsDebug,moment(t).isValid()){let i=moment(t).format("HH:mm");n.input.setOptions({minTime:i})}};n.myroot.API.SetMaxDate=function(t){n.myroot.IsDebug;moment(t).isValid()&&(t=moment(t)._d,n.input.data("DateTimePicker").maxDate(t))};$("input[name="+n.myroot.ID+"]").val(n.myroot.Value);n.myroot.IsReady=!0}}};dateTimePicker.$inject=[];formatMoney=function(n,t){return{require:"?ngModel",restrict:"A",scope:{myModel:"=",precision:"=",formatMoneyNoInput:"="},link:function(n,i){(n.precision==null||n.precision==undefined)&&(n.precision=0);i.maskMoney({allowNegative:!0,thousands:",",decimal:".",affixesStay:!1,allowZero:!0,precision:n.precision});i.keydown(function(r){var u=String.fromCharCode(r.which);if(_.contains(n.formatMoneyNoInput,u)){r.preventDefault();return}t(function(){n.myModel=parseFloat(i.val().replace(new RegExp(",","g"),""));i.trigger("change")})});n.$watch("myModel",function(){$.isNumeric(n.myModel)&&n.myModel.toString().indexOf(".")>0?i.val(n.myModel.toFixed(n.precision)).trigger("mask.maskMoney"):i.val(n.myModel).trigger("mask.maskMoney")})}}};formatMoney.$inject=["$filter","$timeout"];getWidth=function(n,t){return{restrict:"A",scope:{getWidth:"="},link:function(n,i){$(function(){n.getWidth=i[0].offsetWidth;t(function(){n.getWidth=i[0].offsetWidth},500)})}}};getWidth.$inject=["$timeout","$interval"];getHeight=function(n,t){return{restrict:"A",scope:{getHeight:"="},link:function(n,i){$(function(){n.getHeight=i[0].offsetHeight;t(function(){n.getHeight=i[0].offsetHeight},500)})}}};getHeight.$inject=["$timeout","$interval"];lazyLoad=function(n,t){return{restrict:"A",scope:{fncallback:"&lazyLoad"},link:function(n,i){n.IsLoaded=!1;n.raw=i[0];angular.element(t).bind("scroll",function(){var i=$(n.raw).is(":visible"),t;!n.IsLoaded&&i&&(t=$(n.raw).position().top,this.pageYOffset+this.innerHeight>=t&&(n.fncallback(),n.IsLoaded=!0,n.$apply()))})}}};lazyLoad.$inject=["$timeout","$window"];noInput=function(){return{restrict:"A",scope:{noInput:"="},link:function(n,t){t.bind("keydown keypress",function(t){var i=String.fromCharCode(t.which);_.contains(n.noInput,i)&&t.preventDefault()})}}};noInput.$inject=[];whenEnter=function(){return function(n,t,i){t.bind("keydown keypress",function(t){t.which===13&&(n.$apply(function(){n.$eval(i.whenEnter)}),t.preventDefault())})}};whenEnter.$inject=[];compile=function(n){return function(t,i,r){t.$watch(function(n){return n.$eval(r.compile)},function(r){i.html(r);n(i.contents())(t)})}};compile.$inject=["$compile"];gridSort=function(){return{restrict:"E",scope:{sort:"=",columnName:"=",fnCallBack:"&"},templateUrl:"/script-handler/app/directives/GridSort/GridSort.html",link:function(){}}};gridSort.$inject=["$timeout"];paginationStyle1=function(n){return{restrict:"E",scope:{pager:"=",totalItems:"=",fnCallBack:"&"},templateUrl:"/script-handler/app/directives/pagination-style/pagination-style.html",link:function(t){function i(){if(!t.pager.CurrentPage||t.pager.CurrentPage<1||t.pager.CurrentPage>t.pager.TotalPages){t.pager.Pages=[];return}if(!t.pager.TotalPages){t.pager.Pages=[];return}r(t.pager.TotalItems,t.pager.CurrentPage,t.pager.PageSize)}function r(n,i,r){var o,e,c,v,l,u;i=i||1;r=r||10;o=t.pager.StartPage||1;e=t.pager.EndPage||10;var s=10,f=[],h=Math.floor(t.pager.TotalPages/s),a=t.pager.TotalPages%s;for(u=1;u<=h;u++)c=(u-1)*r,v=c+s,f.push({Start:c+1,End:v});for(a>0&&f.push({Start:h*s+1,End:h*s+a}),l=!1,u=0;u<f.length;u++)if(i>=f[u].Start&&i<=f[u].End){o=f[u].Start;e=f[u].End;e>10&&e-o<9&&(o=e-9);l=!0;break}l||(i=f[0].Start,o=f[0].Start,e=f[0].End);var y=(i-1)*r,w=Math.min(y+r-1,n-1),p=[];for(u=o;u<=e;u++)p.push(u);i<=0&&(i=1);t.pager.PageSize=r;t.pager.StartPage=o;t.pager.EndPage=e;t.pager.StartIndex=y;t.pager.EndIndex=w;t.pager.Pages=p}t.pager.TotalItems=0;t.pager.TotalPages=0;t.$watch("totalItems",function(){t.pager.TotalItems=t.totalItems;t.InitPager()});t.$watch("pager.CurrentPage",function(){t.InitPager()});t.InitPager=function(){n(function(){t.pager.TotalPages=Math.ceil(t.pager.TotalItems/t.pager.PageSize);t.pager.CurrentPage>t.pager.TotalPages&&(t.pager.CurrentPage=t.pager.TotalPages,t.pager.TotalPages==0&&(t.pager.CurrentPage=1));i()})};t.Exec=function(n){n>t.pager.TotalPages||t.fnCallBack({PageClicked:n})};t.ExecFirst=function(n){n>t.pager.TotalPages&&(n=t.pager.TotalPages);n<=0&&(n=1);t.pager.StartPage=t.pager.StartPage-10;t.pager.EndPage=t.pager.EndPage-10;t.pager.StartPage<=0&&(t.pager.StartPage=1,t.pager.EndPage=10);t.fnCallBack({PageClicked:n})};t.ExecLast=function(n){n>t.pager.TotalPages&&(n=t.pager.TotalPages);t.pager.StartPage=t.pager.EndPage+1;t.pager.EndPage=t.pager.StartPage+9;t.pager.EndPage>t.pager.TotalPages&&(t.pager.EndPage=t.pager.TotalPages,t.pager.StartPage=t.pager.EndPage-9);t.fnCallBack({PageClicked:n})};t.pager.GetPageIndexReLoad=function(n){return t.pager.CurrentPage<t.pager.TotalPages?t.pager.CurrentPage:n%t.pager.PageSize>0?t.pager.CurrentPage:t.pager.CurrentPage-1}}}};paginationStyle1.$inject=["$timeout"];paginationStyle2=function(n){return{restrict:"E",scope:{pager:"=",totalItems:"=",fnCallBack:"&"},templateUrl:"/script-handler/app/directives/pagination-style2/pagination-style2.html",link:function(t){t.pager.MaxPage=-1;t.$watch("totalItems",function(){t.pager.TotalItems=t.totalItems;t.pager.MaxPage=-1;t.InitPager()});t.$watch("pager.CurrentPage",function(){t.InitPager()});t.InitPager=function(){n(function(){var n=(t.pager.CurrentPage-1)*t.pager.PageSize,i=n+t.pager.PageSize;t.pager.StartIndex=n;i>=t.pager.TotalItems&&(t.pager.MaxPage=t.pager.CurrentPage)})};t.Exec=function(n){t.pager.MaxPage>-1&&n>t.pager.MaxPage||n<=0||t.fnCallBack({PageClicked:n})}}}};paginationStyle2.$inject=["$timeout"];inputFormat=function(n){return{require:"?ngModel",restrict:"A",link:function(t,i,r,u){function f(n){return Number(n)===n&&n%1!=0}var e=r.allowDecimal=="true"?!0:!1;(t.allowdecimal=e,t.defaultValue=r.defaultValue?r.defaultValue:!1,u)&&(i.bind("keypress",function(n){var t=n.which||n.keyCode,i=r.allowDecimal=="true"?!0:!1;if(t>47&&t<58||t==8||t==9||t==190||t==39||t==37||t==43||i&&t==46)return!0;n.preventDefault()}),u.$formatters.unshift(function(){let i=0;r.defaultValue!==undefined&&(i=r.defaultValue);let t=n(r.inputFormat)(u.$modelValue?u.$modelValue:i);return t=="0"&&(t=""),t}),u.$parsers.unshift(function(u){var c=r.allowDecimal=="true"?!0:!1,e,o,s,h;if(parseInt(u)?!c&&f(parseFloat(u))&&(u=t.defaultValue):u=r.defaultValue,e=u.replace(/[^\d|\.|\-]/g,""),e=e||0,e!="")return o=e.match(/\./g),s=e.match(/\.$/g),o=o!=null&&o.length==1&&s!=null?".":"",h=n(r.inputFormat)(e),i.val(h+o).trigger("change"),parseFloat(e)}))}}};inputFormat.$inject=["$filter"];